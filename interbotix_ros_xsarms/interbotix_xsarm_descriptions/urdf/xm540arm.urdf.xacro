<?xml version="1.0"?>
<robot name="xm540arm" xmlns:xacro="http://ros.org/wiki/xacro">

  <xacro:arg name="robot_name" default = "xm540arm"/>
  <xacro:arg name="base_link_frame" default="base_link"/>
  <xacro:arg name="show_ar_tag" default="false"/>
  <xacro:arg name="show_gripper_bar" default="true"/>
  <xacro:arg name="show_gripper_fingers" default="false"/>
  <xacro:arg name="use_world_frame" default="true"/>
  <xacro:arg name="external_urdf_loc" default=""/>
  <xacro:arg name="load_gazebo_configs" default="false"/>

  <xacro:property name="urdf_loc" value="$(arg external_urdf_loc)"/>
  <xacro:property name="pi_offset" value="0.00001"/>

  <xacro:if value="$(arg load_gazebo_configs)">
    <xacro:include filename="$(find interbotix_xsarm_gazebo)/config/interbotix_texture.gazebo"/>
  </xacro:if>

  <material name="interbotix_black">
    <texture filename="package://interbotix_xsarm_descriptions/meshes/interbotix_black.png"/>
  </material>

  <xacro:if value="$(arg use_world_frame)">
    <link name="world"/>
    <joint name="fixed" type="fixed">
      <parent link="world"/>
      <child link="$(arg robot_name)/$(arg base_link_frame)"/>
    </joint>
  </xacro:if>

  <link name="$(arg robot_name)/$(arg base_link_frame)">
    <visual>
      <origin rpy="0 0 ${pi/2}" xyz="0.08895 -0.08895 0"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_1_base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="interbotix_black"/>
    </visual>
    <collision>
      <origin rpy="0 0 ${pi/2}" xyz="0.08895 -0.08895 0"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_1_base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 ${pi/2}" xyz="-0.0534774000 -0.0005625750 0.0205961000"/>
      <mass value="0.969034" />
      <inertia ixx="0.0060240000" iyy="0.0017000000" izz="0.0071620000" ixy="0.0000471300" ixz="0.0000038510" iyz="-0.0000841500" />
    </inertial>
  </link>

  <joint name="waist" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="10" lower="${-pi + pi_offset}" upper="${pi - pi_offset}" velocity="${pi}"/>
    <origin rpy="0 0 0" xyz="0 0 0.079"/>
    <parent link="$(arg robot_name)/$(arg base_link_frame)"/>
    <child link="$(arg robot_name)/shoulder_link"/>
    <dynamics friction="0.1"/>
  </joint>

  <transmission name="trans_waist">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="waist">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="waist_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <link name="$(arg robot_name)/shoulder_link">
    <visual>
      <origin rpy="0 0 ${pi/2}" xyz="0.0479 -0.05155 -0.079"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_2_shoulder.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="interbotix_black"/>
    </visual>
    <collision>
      <origin rpy="0 0 ${pi/2}" xyz="0.0479 -0.05155 -0.079"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_2_shoulder.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 ${pi/2}" xyz="0.0002592330 -0.0000033552 0.0116129000"/>
      <mass value="0.798614" />
      <inertia ixx="0.0009388000" iyy="0.0011380000" izz="0.0012010000" ixy="-0.0000000010" ixz="-0.0000000191" iyz="0.0000059568" />
    </inertial>
  </link>

  <joint name="shoulder" type="revolute">
    <axis xyz="0 1 0"/>
    <limit effort="20" lower="${radians(-106)}" upper="${radians(72)}" velocity="${pi}"/>
    <origin rpy="0 0 0" xyz="0 0 0.04805"/>
    <parent link="$(arg robot_name)/shoulder_link"/>
    <child link="$(arg robot_name)/upper_arm_link"/>
    <dynamics friction="0.1"/>
  </joint>

  <transmission name="trans_shoulder">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="shoulder">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="shoulder_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <link name="$(arg robot_name)/upper_arm_link">
    <visual>
      <origin rpy="0 ${pi} ${pi/2}" xyz="0.05842 0.05025 0.34455"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_3_upper_arm.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="interbotix_black"/>
    </visual>
    <collision>
      <origin rpy="0 ${pi} ${pi/2}" xyz="0.05842 0.05025 0.34455"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_3_upper_arm.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 ${pi/2}" xyz="0.0206949000 0.0000000004 0.2264590000"/>
      <mass value="0.792592" />
      <inertia ixx="0.0089250000" iyy="0.0089370000" izz="0.0009357000" ixy="0.0000000000" ixz="0.0000000000" iyz="0.0012010000" />
    </inertial>
  </link>

  <joint name="elbow" type="revolute">
    <axis xyz="0 1 0"/>
    <limit effort="15" lower="${radians(-101)}" upper="${radians(92)}" velocity="${pi}"/>
    <origin rpy="0 0 0" xyz="0.043 0 0.325"/>
    <parent link="$(arg robot_name)/upper_arm_link"/>
    <child link="$(arg robot_name)/upper_forearm_link"/>
    <dynamics friction="0.1"/>
  </joint>

  <transmission name="trans_elbow">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="elbow">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="elbow_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <link name="$(arg robot_name)/upper_forearm_link">
    <visual>
      <origin rpy="${pi/2} 0 ${pi/2}" xyz="-0.0006 -0.05162 -0.020"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_4_upper_forearm.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="interbotix_black"/>
    </visual>
    <collision>
      <origin rpy="${pi/2} 0 ${pi/2}" xyz="-0.0006 -0.05162 -0.020"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_4_upper_forearm.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0.105723 0 0"/>
      <mass value="0.322228" />
      <inertia ixx="0.0001524000" iyy="0.0013420000" izz="0.0014410000" ixy="-0.0000188300" ixz="-0.0000084064" iyz="0.0000012564" />
    </inertial>
  </link>

  <joint name="forearm_roll" type="revolute">
    <axis xyz="1 0 0"/>
    <limit effort="2" lower="${-pi + pi_offset}" upper="${pi - pi_offset}" velocity="${pi}"/>
    <origin rpy="0 0 0" xyz="0.23775 0 0"/>
    <parent link="$(arg robot_name)/upper_forearm_link"/>
    <child link="$(arg robot_name)/lower_forearm_link"/>
    <dynamics friction="0.1"/>
  </joint>

  <transmission name="trans_forearm_roll">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="forearm_roll">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="forearm_roll_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <link name="$(arg robot_name)/lower_forearm_link">
    <visual>
      <origin rpy="${pi/2} ${pi} ${-pi/2}" xyz="0.113 -0.02617 0.0223"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_5_lower_forearm.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="interbotix_black"/>
    </visual>
    <collision>
      <origin rpy="${pi/2} ${pi} ${-pi/2}" xyz="0.113 -0.02617 0.0223"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_5_lower_forearm.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="${pi} 0 0" xyz="0.0513477000 0.0068046200 0"/>
      <mass value="0.414823" />
      <inertia ixx="0.0001753000" iyy="0.0005269000" izz="0.0005911000" ixy="-0.0000852800" ixz="0" iyz="0" />
    </inertial>
  </link>

  <joint name="wrist_angle" type="revolute">
    <axis xyz="0 1 0"/>
    <limit effort="5" lower="${radians(-107)}" upper="${radians(128)}" velocity="${pi}"/>
    <origin rpy="0 0 0" xyz="0.1 0 0"/>
    <parent link="$(arg robot_name)/lower_forearm_link"/>
    <child link="$(arg robot_name)/wrist_link"/>
    <dynamics friction="0.1"/>
  </joint>

  <transmission name="trans_wrist_angle">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="wrist_angle">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="wrist_angle_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <link name="$(arg robot_name)/wrist_link">
    <visual>
      <origin rpy="${-pi/2} ${-pi/1} 0" xyz="0.065 -0.03055 -0.0168"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_6_wrist.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="interbotix_black"/>
    </visual>
    <collision>
      <origin rpy="${-pi/2} ${-pi/1} 0" xyz="0.065 -0.03055 -0.0168"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_6_wrist.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="${-pi/2} ${-pi/1} 0" xyz="0.0467430000 -0.0000076652 0.0105650000"/>
      <mass value="0.115395" />
      <inertia ixx="0.0000463100" iyy="0.0000451400" izz="0.0000527000" ixy="0.0000000195" ixz="0.0000000023" iyz="0.0000042002" />
    </inertial>
  </link>

  <joint name="wrist_rotate" type="revolute">
    <axis xyz="1 0 0"/>
    <limit effort="1" lower="${-pi + pi_offset}" upper="${pi - pi_offset}" velocity="${pi}"/>
    <origin rpy="0 0 0" xyz="0.069744 -0.001 0"/>
    <parent link="$(arg robot_name)/wrist_link"/>
    <child link="$(arg robot_name)/gripper_link"/>
    <dynamics friction="0.1"/>
  </joint>

  <transmission name="trans_wrist_rotate">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="wrist_rotate">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="wrist_rotate_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <link name="$(arg robot_name)/gripper_link">
    <visual>
      <origin rpy="${pi/2} 0 ${pi/2}" xyz="-0.0128 -0.03255 -0.0214"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_7_gripper.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="interbotix_black"/>
    </visual>
    <collision>
      <origin rpy="${pi/2} 0 ${pi/2}" xyz="-0.0128 -0.03255 -0.0214"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_7_gripper.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="${pi/2} 0 ${pi/2}" xyz="0.0230010000 0.0000000000 0.0115230000"/>
      <mass value="0.097666" />
      <inertia ixx="0.0000326800" iyy="0.0000243600" izz="0.0000211900" ixy="0.0000000000" ixz="0.0000000000" iyz="0.0000002785" />
    </inertial>
  </link>
  
  <joint name="ee_arm" type="fixed">
     <axis xyz="1 0 0"/>
     <origin rpy="0 0 0" xyz="0.042825 0 0"/>
     <parent link="$(arg robot_name)/gripper_link"/>
     <child link="$(arg robot_name)/ee_arm_link"/>
  </joint>

  <link name="$(arg robot_name)/ee_arm_link">
     <inertial>
       <mass value="0.001" />
       <inertia ixx="0.0001" iyy="0.0001" izz="0.0001" ixy="0" ixz="0" iyz="0" />
     </inertial>
  </link>



  <joint name="gripper" type="revolute">
      <axis xyz="0 0 1"/>
     <limit effort="3.0" lower="0" upper="0.85" velocity="2"/>
      <origin rpy="0 0 0" xyz="-0.011 0.0145 0"/>
      <parent link="$(arg robot_name)/ee_arm_link"/>
      <child link="$(arg robot_name)/LH_gripper_prop_link"/>
      <dynamics friction="0.1"/>
  </joint>

  <transmission name="trans_gripper">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="gripper">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="gripper_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <link name="$(arg robot_name)/LH_gripper_prop_link">
    <visual>
      <origin rpy="0 0 ${-pi/2} " xyz="-0.01226 0.0282 -0.0229"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_8_LH_gripper_prop.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="interbotix_black"/>
    </visual>
    <collision>
      <origin rpy="0 0 ${-pi/2} " xyz="-0.01226 0.0282 -0.0229"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_8_LH_gripper_prop.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 ${-pi/2} " xyz="0.00 0.00 0.00"/>
      <mass value="0.004282" />
      <inertia ixx="1.67E-06" iyy="5.06E-07" izz="1.51E-06" ixy="2.87E-11" ixz="9.94E-08" iyz="-1.48E-10" />
    </inertial>
  </link>

  <joint name="gripper1" type="revolute">
      <axis xyz="0 0 1"/>
      <limit effort="3.0" lower="0" upper="0.85" velocity="2"/>
      <origin rpy="0 0 0" xyz="-0.011 -0.0145 0"/>
      <parent link="$(arg robot_name)/ee_arm_link"/>
      <child link="$(arg robot_name)/RH_gripper_prop_link"/>
      <mimic joint="gripper" multiplier="-1" offset="0"/> 
      <dynamics friction="0.1"/> 
  </joint>

  <link name="$(arg robot_name)/RH_gripper_prop_link">
    <visual>
      <origin rpy="0 0 ${-pi/2}" xyz="-0.01226 0.0065 -0.02305"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_8_RH_gripper_prop.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="interbotix_black"/>
    </visual>
    <collision>
      <origin rpy="0 0 ${-pi/2}" xyz="-0.0122 0.0065 -0.02305"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_8_RH_gripper_prop.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 ${-pi/2}" xyz="0.00 0.00 0.00"/>
      <mass value="0.004282" />
      <inertia ixx="1.67E-06" iyy="5.06E-07" izz="1.51E-06" ixy="2.87E-11" ixz="9.94E-08" iyz="-1.48E-10" />
    </inertial>
  </link>  


  <joint name="LH_outside_finger_link" type="continuous">
      <axis xyz="0 0 1"/>
      <limit effort="50.0" lower="0" upper="0.85" velocity="2"/>
      <origin rpy="0 0 0" xyz="0.0182 0.02409 0"/>
      <parent link="$(arg robot_name)/LH_gripper_prop_link"/>
      <child link="$(arg robot_name)/LH_outside_link"/>
      <mimic joint="gripper1" multiplier="-1" offset="0"/> 
      <dynamics friction="0.5"/>  
  </joint>

  <link name="$(arg robot_name)/LH_outside_link">
    <visual>
      <origin rpy="0 0 ${-pi/2} " xyz="-0.02194 0.0043 -0.0229"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_10_LH_outside_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="interbotix_black"/>
    </visual>
    <collision>
      <origin rpy="0 0 ${-pi/2} " xyz="-0.02194 0.0043 -0.0229"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_10_LH_outside_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 ${-pi/2} " xyz="0.00 0.00 0.00"/>
      <mass value="0.005217" />
      <inertia ixx="1.45E-06" iyy="1.36E-06" izz="1.55E-07" ixy="1.05E-12" ixz="-2.34E-08" iyz="8.98E-11" />
    </inertial>
  </link>


  <joint name="RH_outside_finger_link" type="continuous">
      <axis xyz="0 0 1"/>
      <limit effort="50.0" lower="0" upper="0.85" velocity="2"/>
      <origin rpy="0 0 0" xyz="0.01782 -0.0243 0"/>
      <parent link="$(arg robot_name)/RH_gripper_prop_link"/>
      <child link="$(arg robot_name)/RH_outside_link"/>
      <mimic joint="gripper" multiplier="-1" offset="0"/>
      <dynamics friction="0.5"/> 
  </joint>

  <link name="$(arg robot_name)/RH_outside_link">
    <visual>
      <origin rpy="0 0 ${-pi/2} " xyz="-0.02198 0.02231 -0.0229"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_10_RH_outside_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="interbotix_black"/>
    </visual>
    <collision>
      <origin rpy="0 0 ${-pi/2} " xyz="-0.02198 0.02231 -0.0229"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_10_RH_outside_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 ${-pi/2} " xyz="0.00 0.00 0.00"/>
      <mass value="0.005217" />
      <inertia ixx="1.45E-06" iyy="1.36E-06" izz="1.55E-07" ixy="1.05E-12" ixz="-2.34E-08" iyz="8.98E-11" />
    </inertial>
  </link>

 

  <xacro:if value="$(arg show_gripper_bar)">

    <joint name="gripper_center_support" type="fixed">
      <axis xyz="0 1 0"/>
      <origin rpy="0 0 0" xyz="0.005 0 0"/>
      <parent link="$(arg robot_name)/ee_arm_link"/>
      <child link="$(arg robot_name)/gripper_center_support_link"/>
    </joint>

    <link name="$(arg robot_name)/gripper_center_support_link">
      <visual>
       <origin rpy="${pi} ${pi} ${pi/2}" xyz="-0.0203 0.013 -0.0232"/>
       <geometry>
         <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_9_gripper_center_support.stl" scale="0.001 0.001 0.001"/>
       </geometry>
       <material name="interbotix_black"/>
      </visual>
      <collision>
       <origin rpy="${pi} ${pi} ${pi/2}" xyz="-0.0203 0.013 -0.0232"/>
        <geometry>
         <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_9_gripper_center_support.stl" scale="0.001 0.001 0.001"/>
       </geometry>
      </collision>
      <inertial>
       <origin rpy="${pi} ${pi} ${-pi/2}" xyz="0.00 -0.00 -0.00"/>
       <mass value="0.003389" />
       <inertia ixx="0.0000789500" iyy="0.0003283000" izz="0.0003095000" ixy="-0.0000000012" ixz="0.0000001341" iyz="0.0000017465" />
      </inertial>
    </link>


    <joint name="LH_inside_lower" type="continuous">
      <axis xyz="0 0 1"/>
      <limit effort="50.0" lower="0" upper="0.85" velocity="2"/>
      <origin rpy="0 0 0" xyz="0.0011 0.0103 0.0019"/>
      <parent link="$(arg robot_name)/gripper_center_support_link"/>
      <child link="$(arg robot_name)/LH_inside_lower_link"/>
      <mimic joint="gripper1" multiplier="-1" offset="0"/>
      <dynamics friction="0.5"/> 
    </joint>
     
    <link name="$(arg robot_name)/LH_inside_lower_link">
     <visual>
       <origin rpy="0 0 ${-pi/2}" xyz="-0.0217 0.0039 -0.0241"/>
       <geometry>
         <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_11_LH_inside_lower_link.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="interbotix_black"/>
      </visual>
      <collision>
        <origin rpy="0 0 ${-pi/2}" xyz="-0.0217 0.0039 -0.0241"/>
        <geometry>
          <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_11_LH_inside_lower_link.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </collision>
      <inertial>
        <origin rpy="0 0 ${-pi/2}" xyz="0.00 -0.00 -0.00"/>
        <mass value="0.003051" />
        <inertia ixx="0.0000789500" iyy="0.0003283000" izz="0.0003095000" ixy="-0.0000000012" ixz="0.0000001341" iyz="0.0000017465" />
      </inertial>
    </link>


    <joint name="RH_inside_lower" type="continuous">
      <axis xyz="0 0 1"/>
      <limit effort="50.0" lower="0" upper="0.85" velocity="2"/>
      <origin rpy="0 0 0" xyz="0.0011 -0.01 0.0014"/>
      <parent link="$(arg robot_name)/gripper_center_support_link"/>
      <child link="$(arg robot_name)/RH_inside_lower_link"/>
      <mimic joint="gripper" multiplier="-1" offset="0"/>
      <dynamics friction="0.5"/> 
    </joint>

    <link name="$(arg robot_name)/RH_inside_lower_link">
      <visual>
       <origin rpy="${pi} ${pi} ${pi/2}" xyz="-0.0215 0.0041 -0.024"/>
       <geometry>
         <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_11_RH_inside_lower_link.stl" scale="0.001 0.001 0.001"/>
       </geometry>
       <material name="interbotix_black"/>
      </visual>
      <collision>
       <origin rpy="${pi} ${pi} ${pi/2}" xyz="-0.0215 0.0041 -0.024"/>
       <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_11_RH_inside_lower_link.stl" scale="0.001 0.001 0.001"/>
       </geometry>
      </collision>
      <inertial>
       <origin rpy="0 0 ${-pi/2}" xyz="0.00 -0.00 -0.00"/>
       <mass value="0.003051" />
       <inertia ixx="0.0000243300" iyy="0.0000125500" izz="0.0000141700" ixy="-0.0000024004" ixz="0.0000000000" iyz="0.0000000000" />
     </inertial>
    </link>


    <joint name="LH_inside_top" type="continuous">
      <axis xyz="0 0 1"/>
      <limit effort="50.0" lower="0" upper="0.85" velocity="2"/>
      <origin rpy="0 0 0" xyz="0.0297 -0.001 0"/>
      <parent link="$(arg robot_name)/LH_inside_lower_link"/>
      <child link="$(arg robot_name)/LH_inside_top_link"/>
      <mimic joint="gripper1" multiplier="-1" offset="0"/>
      <dynamics friction="0.5"/> 
    </joint>
     
    <link name="$(arg robot_name)/LH_inside_top_link">
     <visual>
      <origin rpy="0 0 ${-pi/2}" xyz="-0.05 0.0044 -0.01989"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_12_LH_inside_top_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="interbotix_black"/>
     </visual>
     <collision>
      <origin rpy="0 0 ${-pi/2}" xyz="-0.05 0.0044 -0.01989"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_12_LH_inside_top_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
     </collision>
     <inertial>
      <origin rpy="0 0 ${-pi/2}" xyz="0.00 -0.00 -0.00"/>
      <mass value="0.003353" />
      <inertia ixx="0.0000789500" iyy="0.0003283000" izz="0.0003095000" ixy="-0.0000000012" ixz="0.0000001341" iyz="0.0000017465" />
     </inertial>
    </link>

    <joint name="RH_inside_top" type="continuous">
      <axis xyz="0 0 1"/>
      <limit effort="50.0" lower="0" upper="0.85" velocity="2"/>
      <origin rpy="0 0 0" xyz="0.0279 -0.0001 0"/>
      <parent link="$(arg robot_name)/RH_inside_lower_link"/>
      <child link="$(arg robot_name)/RH_inside_top_link"/>
      <mimic joint="gripper" multiplier="-1" offset="0"/>
      <dynamics friction="0.5"/> 
    </joint>
     
    <link name="$(arg robot_name)/RH_inside_top_link">
     <visual>
      <origin rpy="0 0 ${-pi/2}" xyz="-0.05 0.0044 -0.024"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_12_RH_inside_top_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="interbotix_black"/>
     </visual>
     <collision>
      <origin rpy="0 0 ${-pi/2}" xyz="-0.05 0.0044 -0.024"/>
      <geometry>
        <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_12_RH_inside_top_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
     </collision>
     <inertial>
      <origin rpy="0 0 ${-pi/2}" xyz="0.00 -0.00 -0.00"/>
      <mass value="0.003353" />
      <inertia ixx="0.0000789500" iyy="0.0003283000" izz="0.0003095000" ixy="-0.0000000012" ixz="0.0000001341" iyz="0.0000017465" />
     </inertial>
    </link>

    <joint name="ee_bar" type="fixed">
      <axis xyz="1 0 0"/>
      <origin rpy="0 0 0" xyz="0.04875 0 0"/>
      <parent link="$(arg robot_name)/gripper_center_support_link"/>
      <child link="$(arg robot_name)/fingers_link"/>
    </joint>

    <link name="$(arg robot_name)/fingers_link">
      <inertial>
        <mass value="0.001" />
        <inertia ixx="0.0001" iyy="0.0001" izz="0.0001" ixy="0" ixz="0" iyz="0" />
      </inertial>
    </link> 

 <!-- If the gripper fingers are being used, add those as well -->

    <xacro:if value="$(arg show_gripper_fingers)">

     <joint name="left_finger" type="continuous">
       <axis xyz="0 0 1"/>
       <limit effort="50.0" lower="0" upper="0.85" velocity="2"/>
       <origin rpy="${pi} ${pi} ${pi}" xyz="0.0455 -0.0191 -0.0014"/>
       <parent link="$(arg robot_name)/LH_outside_link"/>
       <child link="$(arg robot_name)/left_finger_link"/>
       <mimic joint="gripper" multiplier="-2" offset="0"/>
       <dynamics friction="0.5"/> 
     </joint>

     <link name="$(arg robot_name)/left_finger_link">
      <visual>
        <origin rpy="${pi} ${pi} ${pi/2}" xyz="-0.068 0.0071 -0.021"/>
        <geometry>
          <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_0_left_finger.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="interbotix_black"/>
      </visual>
      <collision>
        <origin rpy="${pi} ${pi} ${pi/2}" xyz="-0.068 0.0071 -0.021"/>
        <geometry>
          <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_0_left_finger.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </collision>
      <inertial>
        <origin rpy="${pi} ${pi} ${pi/2}" xyz="-0.00 0.00 -0.00"/>
        <mass value="0.012202" />
        <inertia ixx="3.95E-06" iyy="03.56E-06" izz="1.05E-06" ixy="-1.68E-10" ixz="5.29E-07" iyz="9.59E-10" />
      </inertial>
     </link>

   

     <joint name="right_finger" type="continuous">
       <axis xyz="0 0 1"/>
       <limit effort="50.0" lower="0" upper="0.85" velocity="2"/>
       <origin rpy="${pi} ${pi} ${pi}" xyz="0.0455 0.0187 -0.0014"/>
       <parent link="$(arg robot_name)/RH_outside_link"/>
       <child link="$(arg robot_name)/right_finger_link"/>
       <mimic joint="gripper1" multiplier="-2" offset="0"/>
       <dynamics friction="0.5"/> 
     </joint>

     <link name="$(arg robot_name)/right_finger_link">
      <visual>
        <origin rpy="${pi} ${pi} ${pi/2}" xyz="-0.0678 0.0145 -0.0228"/>
        <geometry>
          <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_0_right_finger.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="interbotix_black"/>
      </visual>
      <collision>
        <origin rpy="${pi} ${pi} ${pi/2}" xyz="-0.0678 0.0145 -0.0228"/>
        <geometry>
          <mesh filename="package://interbotix_xsarm_descriptions/meshes/xm540arm_meshes/xm540arm_0_right_finger.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </collision>
      <inertial>
        <origin rpy="${pi} ${pi} ${pi/2}" xyz="-0.00 0.00 -0.00"/>
        <mass value="0.012202" />
        <inertia ixx="6.87E-06" iyy="6.36E-06" izz="1.38E-06" ixy="4.74E-09" ixz="7.41E-08" iyz="2.76E-08" />
      </inertial>
     </link>
   
 
     <joint name="ee_gripper" type="fixed">
       <axis xyz="1 0 0"/>
       <origin rpy="0 0 0" xyz="0.038 0 0"/>
       <parent link="$(arg robot_name)/fingers_link"/>
       <child link="$(arg robot_name)/ee_gripper_link"/>
     </joint>

     <link name="$(arg robot_name)/ee_gripper_link">
       <inertial>
         <mass value="0.001" />
         <inertia ixx="0.0001" iyy="0.0001" izz="0.0001" ixy="0" ixz="0" iyz="0" />
       </inertial>
     </link>
 
   
     
      
    </xacro:if>

  </xacro:if>

  <xacro:if value="${urdf_loc != ''}">
    <xacro:include filename="${urdf_loc}"/>
  </xacro:if>

</robot>  
  
  
  

 
